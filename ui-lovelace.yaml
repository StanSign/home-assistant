resources:
  - url: /hacsfiles/button-card/button-card.js
    type: module
  - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
    type: module
  - url: /hacsfiles/sidebar-card/sidebar-card.js
    type: module
  - url: /hacsfiles/lovelace-card-mod/card-mod.js
    type: module
  - url: /hacsfiles/vertical-stack-in-card/vertical-stack-in-card.js
    type: module
  - url: /hacsfiles/rgb-light-card/card.js
    type: module
  - url: /hacsfiles/lovelace-slider-entity-row/slider-entity-row.js
    type: module
  - url: /hacsfiles/lovelace-layout-card/layout-card.js
    type: module
  - url: /hacsfiles/swipe-card/swipe-card.js
    type: module
  - url: /hacsfiles/simple-weather-card/simple-weather-card-bundle.js
    type: module
  - url: /hacsfiles/lovelace-gap-card/gap-card.js
    type: module
  - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
    type: module
  - url: /hacsfiles/kb-steam-card/kb-steam-card.js
    type: module
  - url: /hacsfiles/battery-state-card/battery-state-card.js
    type: module
  - url: /hacsfiles/lovelace-hui-element/hui-element.js
    type: module
  - url: /hacsfiles/light-popup-card/light-popup-card.js
    type: module
  - url: /hacsfiles/light-entity-card/light-entity-card.js
    type: module

preload_cards:
  [map, iframe, markdown]
preload_rows:
  [input-select-entity]

anchors:
  ⚓₁: &title
    entity: sensor.placeholder
    tap_action:
      action: none
    hold_action:
      action: none
    type: state-label
  ⚓₂: &title-style
    color: '#bcbebf'
    font-family: SF Text
    font-size: 2.4vw
    font-weight: 500
    max-width: 1px
    cursor: default

button_card_templates: !include button_templates.yaml

# Card Configurations
custom_field_gap: &custom_field_gap 8%
custom_field_component_color: &custom_field_component_color white
custom_field_font_size: &custom_field_font_size 11px
card_background_color_on: &card_bg_color_on '#4E86D3'
sidebar_background_color: &sidebar_color '#484d61'

views:
    # View tab title.
  - title: Home
    panel: true
    cards:
      - type: 'custom:layout-card'
        layout: vertical
        min_columns: 6
        column_width: [7%, 30%, 1%, 30%, 1%, 30%]
        justify_content: space-around
        cards:
          - type: 'vertical-stack'
            cards:
              - type: 'custom:vertical-stack-in-card'
                cards:
                  - type: 'custom:button-card'
                    icon: 'mdi:home'
                    color_type: card
                    color: var(--primary-background-color)
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action: 
                      action: navigate
                      navigation_path: /lovelace/0
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:microsoft-xbox-controller'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/1
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:lead-pencil'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/2
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:eye'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/3
                
                  - type: 'custom:button-card'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:cog'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /config/dashboard
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:account'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /profile
                      
          - break
          
          - type: markdown
            content: |
              ## <center> {{ states('sensor.time') }}
            style:
              .: |
                ha-card {
                  box-shadow: none !important;
                  background-color: transparent !important;
                  height: 80px;
                }
              ha-markdown: 
                $: |
                  h1 {
                    font-size: 40px !important;
                    font-weight: 100;
                    padding-top: 30px;
                  }

          - type: 'custom:mini-graph-card'
            entities: 
              - entity: sensor.motion_sensor_temperature
                show_line: false
                show_legend: false
                show_points: false
            style:
              .: |
                ha-card {
                  box-shadow: none !important;
                  background-image:
                  {% if states('sensor.motion_sensor_temperature')|float > 25 %}
                    linear-gradient(135deg, #ff9966 0%, #ff5e62 100%)
                  {% else %}
                    linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%)
                  {% endif %}
                  ;
                }
                .fill--rect {
                  fill: white;
                }
                ha-icon {
                  transform: scale(5,5);
                  top: 60px; 
                  right: 20px;
                  color: hsla(0, 0%, 100%, 0.7);
                }
            name: " "
            hour24: true
            height: 250
            hours_to_show: 12
            points_per_hour: 4
            font_size: 70
            font_size_header: 10
            show:
              fill: true
              labels: false
              
          - type: markdown
            content: |
              # Sensors
            style:
              .: |
                ha-card {
                  box-shadow: none !important;
                  background-color: transparent !important;
                  height: 35px;
                }
              ha-markdown:
                $: |
                  h1 {
                    font-size: 16px !important;
                    font-weight: 300;
                  }

          - type: 'vertical-stack'
            cards:
              - type: 'horizontal-stack'
                cards:
                  - type: 'custom:button-card'
                    entity: binary_sensor.door_sensor_contact
                    show_icon: false
                    show_name: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('binary_sensor.door_sensor_contact', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            'var(--card-background-color)';
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                          return '<ha-icon icon="mdi:door-closed" style="width: 20px; height: 20px;">'        
                          return '<ha-icon icon="mdi:door-open" style="width: 20px; height: 20px;">'
                        ]]] 
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'Open';
                            return 'Closed';
                        ]]]
                    hold_action:
                      action: more-info
                        
                  - type: 'custom:button-card'
                    entity: binary_sensor.motion_sensor_occupancy
                    show_icon: false
                    show_name: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('binary_sensor.motion_sensor_occupancy', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:motion-sensor" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:motion-sensor" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'Detected';
                            return 'Clear';
                        ]]]
                    hold_action:
                      action: more-info
          
          - break
          
          - type: 'custom:gap-card'
          
          - break
          
          - type: markdown
            content: |
              # Ceiling Lights
            style:
              .: |
                ha-card {
                  box-shadow: none !important;
                  background-color: transparent !important;
                  height: 35px;
                }
              ha-markdown:
                $: |
                  h1 {
                    font-size: 16px !important;
                    font-weight: 300;
                  }

          - type: 'horizontal-stack'
            cards:
              - type: 'custom:button-card'
                entity: switch.light_switch_switch_l2
                show_icon: false
                show_name: false
                size: 20%
                style: |
                      ha-card {
                        background-image:
                          {% if is_state('switch.light_switch_switch_l2', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                styles:
                  card:
                    - height: 80px
                  icon:
                    - color: *custom_field_component_color
                  custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:wall-sconce-flat" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:wall-sconce-flat" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                tap_action: 
                  action: toggle
                hold_action:
                  action: more-info
                  
              - type: 'custom:button-card'
                entity: switch.light_switch_switch_l1
                show_icon: false
                show_name: false
                size: 20%
                style: |
                      ha-card {
                        background-image:
                          {% if is_state('switch.light_switch_switch_l1', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                styles:
                  card:
                    - height: 80px
                  icon:
                    - color: *custom_field_component_color
                  custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:dome-light" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:dome-light" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                tap_action: 
                  action: toggle
                hold_action:
                  action: more-info
                  
          - type: markdown
            content: |
              # Desk Lights
            style:
              .: |
                ha-card {
                  background-color: transparent !important;
                  box-shadow: none !important;
                  height: 35px;
                }
              ha-markdown:
                $: |
                  h1 {
                    font-size: 16px !important;
                    font-weight: 300;
                    padding-left: 2px !important;
                  }
                  
          - type: 'vertical-stack'
            cards:
              - type: 'horizontal-stack'
                cards:
                ######################## DESK BULB ############################
                  - type: 'custom:button-card'
                    entity: light.desk_bulb_light
                    show_icon: false
                    show_state: false
                    color: auto
                    show_name: false
                    size: 10%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('light.desk_bulb_light', 'on') %}
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                        color:
                          - top: *custom_field_gap
                          - right: *custom_field_gap
                          - position: absolute
                          - color: |
                              [[[
                                var color = states['light.desk_bulb_light'].attributes.rgb_color;
                                return 'rgba(' + color + ', 0.7)';
                              ]]]
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:desk-lamp" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:desk-lamp" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                      color: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:square-rounded" style="width: 15px; height: 15px;">'
                        ]]]
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                ######################## DESK STRIP ############################
                  - type: 'custom:button-card'
                    entity: light.xiaomi_desk_strip
                    show_icon: false
                    show_name: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('light.xiaomi_desk_strip', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                        color:
                          - top: *custom_field_gap
                          - right: *custom_field_gap
                          - position: absolute
                          - color: |
                              [[[
                                var color = states['light.xiaomi_desk_strip'].attributes.rgb_color;
                                return 'rgba(' + color + ', 0.7)';
                              ]]]
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:led-strip-variant" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:led-strip-variant" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                      color: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:square-rounded" style="width: 15px; height: 15px;">'
                        ]]]
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                      
                  - type: 'custom:gap-card'
                    hieght: 80px

          - break
          
          - type: 'custom:gap-card'
          
          - break

            # Mode Control
          - type: markdown
            content: |
              # Mode
            style:
              .: |
                ha-card {
                  box-shadow: none !important;
                  background-color: transparent !important;
                  height: 35px;
                }
              ha-markdown:
                $: |
                  h1 {
                    font-size: 16px !important;
                    font-weight: 300;
                  }
                  
          - type: 'vertical-stack'
            cards:
              - type: 'horizontal-stack'
                cards:
                  - type: 'custom:button-card'
                    entity: input_boolean.study_mode
                    show_name: false
                    show_icon: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('input_boolean.study_mode', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:lead-pencil" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:lead-pencil" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                    tap_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.study_mode
                        
                  - type: 'custom:button-card'
                    entity: input_boolean.game_mode
                    show_name: false
                    show_icon: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('input_boolean.game_mode', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:microsoft-xbox-controller" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:microsoft-xbox-controller" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                    tap_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.game_mode
                    
              - type: 'horizontal-stack'
                cards:
                  - type: 'custom:button-card'
                    entity: input_boolean.sleep_mode
                    show_name: false
                    show_icon: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('input_boolean.sleep_mode', 'on') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='on')
                            return '<ha-icon icon="mdi:power-sleep" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:power-sleep" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='on')
                            return 'On';
                            return 'Off';
                        ]]]
                    tap_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.sleep_mode
                    
                  - type: 'custom:button-card'
                    entity: input_boolean.away_mode
                    show_name: false
                    show_icon: false
                    size: 20%
                    style: |
                      ha-card {
                        background-image:
                          {% if is_state('input_boolean.away_mode', 'off') %} 
                            linear-gradient(135deg, #89d1ff 0%, #89a2ff 70%, #9889ff 100%);
                          {% else %}
                            var(--card-background-color);
                          {% endif %}
                      }
                    styles:
                      card:
                        - height: 80px
                      icon:
                        - color: *custom_field_component_color
                      custom_fields:
                        power:
                          - top: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                        state:
                          - bottom: *custom_field_gap
                          - left: *custom_field_gap
                          - position: absolute
                          - color: *custom_field_component_color
                          - font-size: *custom_field_font_size
                    custom_fields:
                      power: |
                        [[[
                          if (entity.state=='off')
                            return '<ha-icon icon="mdi:home" style="width: 20px; height: 20px;">'        
                            return '<ha-icon icon="mdi:home-export-outline" style="width: 20px; height: 20px;">'
                        ]]]
                      state: |
                        [[[
                          if (entity.state=='off')
                            return 'Home';
                            return 'Away';
                        ]]]
                    tap_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.away_mode
              
              # Shut down
              - type: 'custom:button-card'
                show_name: false
                show_icon: false
                size: 20%
                style: |
                      ha-card {
                        background-image:
                            linear-gradient(135deg, #ff9966 0%, #ff5e62 100%);
                      }
                styles:
                  card:
                    - height: 80px
                    - width: 145px
                  icon:
                    - color: *custom_field_component_color
                  custom_fields:
                    power:
                      - top: *custom_field_gap
                      - left: *custom_field_gap
                      - position: absolute
                      - color: *custom_field_component_color
                    text:
                      - bottom: *custom_field_gap
                      - left: *custom_field_gap
                      - position: absolute
                      - color: *custom_field_component_color
                      - font-size: *custom_field_font_size
                custom_fields:
                      power: |
                        <ha-icon icon="mdi:power" style="width: 20px; height: 20px;">
                      text: |
                        Shut Down
                tap_action:
                  action: call-service
                  service: homeassistant.turn_on
                  service_data:
                    entity_id: scene.shut_down

  - title: Game
    panel: true
    cards:
    # Steam
      - type: 'custom:layout-card'
        layout: vertical
        min_columns: 6
        column_width: [7%, 30%, 1%, 30%, 1%, 30%]
        justify_content: space-around
        cards:
          - type: 'vertical-stack'
            cards:
              - type: 'custom:vertical-stack-in-card'
                cards:
                  - type: 'custom:button-card'
                    icon: 'mdi:home'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action: 
                      action: navigate
                      navigation_path: /lovelace/0
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:microsoft-xbox-controller'
                    color_type: card
                    color: var(--primary-background-color)
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/1
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:lead-pencil'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/2
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:eye'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/3
                
                  - type: 'custom:button-card'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:cog'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /config/dashboard
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:account'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /profile
        
          - break
        
          - type: 'custom:kb-steam-card'
            entity: sensor.steam_76561198086996983
          - type: 'custom:kb-steam-card'
            entities:
              - sensor.steam_76561198086267709
              - sensor.steam_76561198074838957
            game_background: true

          - break
          
          - type: 'custom:gap-card'
          
          - break

          - type: 'custom:mini-media-player'
            entity: media_player.my_room
            artwork: cover
            hide:
              power_state: false

          - break

          - type: 'custom:gap-card'
          
          - break
          
          - type: 'custom:gap-card'

  - title: Study
    panel: true
    cards:
      - type: 'custom:layout-card'
        layout: vertical
        min_columns: 6
        column_width: [7%, 30%, 1%, 30%, 1%, 30%]
        justify_content: space-around
        cards:
          - type: 'vertical-stack'
            cards:
              - type: 'custom:vertical-stack-in-card'
                cards:
                  - type: 'custom:button-card'
                    icon: 'mdi:home'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action: 
                      action: navigate
                      navigation_path: /lovelace/0
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:microsoft-xbox-controller'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/1
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:lead-pencil'
                    color_type: card
                    color: var(--primary-background-color)
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/2
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:eye'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/3
                
                  - type: 'custom:button-card'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:cog'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /config/dashboard
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:account'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /profile
          
          - break
                      
          - type: 'custom:gap-card'
          
          - break
          
          - type: 'custom:gap-card'
          
          - break
          
          - type: 'custom:gap-card'
          
          - break
          
          - type: 'custom:gap-card'
          
          - break
          
          - type: 'custom:gap-card'
          
          - break

  - title: Analystic
    panel: true
    cards:
      - type: 'custom:layout-card'
        layout: vertical
        min_columns: 6
        column_width: [7%, 30%, 1%, 30%, 1%, 30%]
        justify_content: space-around
        cards:
          - type: 'vertical-stack'
            cards:
              - type: 'custom:vertical-stack-in-card'
                cards:
                  - type: 'custom:button-card'
                    icon: 'mdi:home'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action: 
                      action: navigate
                      navigation_path: /lovelace/0
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:microsoft-xbox-controller'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/1
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:lead-pencil'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/2
                      
                  - type: 'custom:button-card'
                    icon: 'mdi:eye'
                    color_type: card
                    color: var(--primary-background-color)
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/3
                
                  - type: 'custom:button-card'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:cog'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /config/dashboard
                        
                  - type: 'custom:button-card'
                    icon: 'mdi:account'
                    color_type: card
                    color: *sidebar_color
                    styles:
                      card:
                        - height: 100px
                        - border-radius: 0%
                    tap_action:
                      action: navigate
                      navigation_path: /profile
          
          - break
        
          - type: markdown
            content: >
              # <center> Home Assistant </center>
            style:
              .: |
                ha-card {
                  background-color: transparent !important;
                  box-shadow: none !important;
                }
                ha-markdown:
                  $: |
                    h1 {
                      font-size: 25px;
                      # font-weight: bold;
                      text-align: center;
                      letter-spacing: '-0.01em';
                      }
          - type: glance
            entities:
              - entity: sensor.hassio_uptime
                icon: 'mdi:clock'
                name: Uptime

              - entity: sensor.latest_version
                icon: 'mdi:package-up'
                name: Version

              - entity: sensor.last_successful_authentication
                name: Last Login

              - entity: sensor.supervisor_updates
                icon: 'mdi:download-network'
                name: Updates
            show_header_toggle: false
            title: false

          - type: horizontal-stack
            cards:
              - align_icon: left
                align_state: center
                entities:
                  - sensor.processor_use
                font_size: 75
                line_width: 8
                animate: true
                icon: 'mdi:chip'
                name: CPU
                show:
                  fill: false
                type: 'custom:mini-graph-card'

              - align_icon: left
                align_state: center
                entities:
                  - sensor.memory_use_percent
                font_size: 75
                line_width: 8
                animate: true
                name: Memory
                show:
                  fill: false
                type: 'custom:mini-graph-card'

              - align_icon: left
                align_state: center
                entities:
                  - sensor.disk_use_percent_home
                font_size: 75
                line_width: 8
                animate: true
                name: Disk
                show:
                  fill: false
                type: 'custom:mini-graph-card'

          - type: markdown
            content: >
              # <center> Restart Services </center>
            style:
              .: |
                ha-card {
                  background-color: transparent !important;
                  box-shadow: none !important;
                }
                ha-markdown:
                  $: |
                    h1 {
                      font-size: 25px;
                      # font-weight: bold;
                      text-align: center;
                      letter-spacing: '-0.01em';
                      }

          - type: glance
            entities:
              - entity: zone.home
                icon: 'mdi:home-assistant'
                name: Hassio
                tap_action:
                  action: call-service
                  service: homeassistant.restart

              - entity: zone.home
                icon: 'mdi:cogs'
                name: Automation
                tap_action:
                  action: call-service
                  service: automation.reload

              - entity: zone.home
                icon: 'mdi:script-text'
                name: Script
                tap_action:
                  action: call-service
                  service: script.reload

              - entity: zone.home
                icon: 'mdi:group'
                name: Groups
                tap_action:
                  action: call-service
                  service: group.reload
            show_header_toggle: false
            show_state: false  
            title: false

          - break
          
          - type: 'custom:gap-card'
          
          - break

          - type: markdown
            content: >
              # <center> Network Status </center>
            style:
              .: |
                ha-card {
                  background-color: transparent !important;
                  box-shadow: none !important;
                }
                ha-markdown:
                  $: |
                    h1 {
                      font-size: 25px;
                      # font-weight: bold;
                      text-align: center;
                      letter-spacing: '-0.01em';
                      }

          - type: entities
            entities:
              - entity: sensor.local_ip
                name: Local IP
              - entity: sensor.myip
                name: External IP
              - entity: sensor.speedtest_download
                name: Download Speed
              - entity: sensor.speedtest_upload
                name: Upload Speed
            

          - break
          
          - type: 'custom:gap-card'
          
          - break

          - type: markdown
            content: >
              # <center> Battery Levels </center>
            style:
              .: |
                ha-card {
                  background-color: transparent !important;
                  box-shadow: none !important;
                }
                ha-markdown:
                  $: |
                    h1 {
                      font-size: 25px;
                      # font-weight: bold;
                      text-align: center;
                      letter-spacing: '-0.01em';
                      }

          - type: 'custom:battery-state-card'
            entities:
              - entity: sensor.door_sensor_battery
                name: Door Sensor
              - entity: sensor.motion_sensor_battery
                name: Motion Sensor
              - entity: sensor.icangjunyi_iphone_battery_level
                name: iPhone
              - entity: sensor.icangjunyi_ipad_2_battery_level
                name: iPad

          

# ================================================================= #
#                                                                   #
#                         L O V E L A C E                           #
#                                                                   #
# ================================================================= #

  - title: Test
    panel: true
    cards: 
      - type: 'custom:layout-card'
        layout: vertical
        column_num: 7
        column_width: [10%, 20%, 10%, 20%, 10%, 20%, 10%]
        cards:

          #   C O L U M N 1   # 

          - type: 'custom:gap-card'

          - break

          #   C O L U M N 2   # 

          - type: 'custom:gap-card'
            
          # ===================================================== #
          #                                                       #
          #                     S E N S O R                       #
          #                                                       #
          # ===================================================== #

          - type: 'vertical-stack'
            cards:
              - type: 'horizontal-stack'
                cards:

                  # ========================================== #
                  #                                            #
                  #              DOOR OPEN SENSOR              #
                  #                                            #
                  # ========================================== #

                  - type: 'custom:button-card'
                    entity: binary_sensor.door_sensor_contact
                    name: Door
                    custom_fields:
                      icon_closet: >
                        [[[ const state = entity.state === 'on' ? 'door' : 'door reverse'; const opacity = entity.state === 'on' ? 'room' : 'room reverse';
                        return `<svg viewBox="0 0 50 50"> <style>.door{animation: door 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;}.room{animation: room 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;}.reverse{animation-direction: reverse;}@keyframes door{0%{transform: none; fill: #9da0a2;}100%{transform: skewY(10deg) translate(4.5%, -3.9%) scaleX(0.8); fill: #b68349;}}@keyframes room{0%{opacity: 0;}100%{opacity: 1;}}</style>
                        <path class="${opacity}" d="M11.4,1.4h27.2v43.1H11.4V1.4z" fill="#bcbcbc"/>
                        <path class="${state}" d="M11.4 1.4v43.1h27.2V1.4H11.4zm23 23.4c0 1.1-.9 1.9-1.9 1.9h0c-1.1 0-1.9-.9-1.9-1.9V21c0-1.1.9-1.9 1.9-1.9h0c1.1 0 1.9.9 1.9 1.9v3.8z"/></svg>`; ]]]
                    styles:
                      custom_fields:
                        icon_closet:
                          [top: 11%, left: 4.1%, width: 3.2vw, position: absolute]
                    template: sensor

                  # ========================================== #
                  #                                            #
                  #                MOTION SENSOR               #
                  #                                            #
                  # ========================================== #

                  - type: 'custom:button-card'
                    entity: binary_sensor.motion_sensor_occupancy
                    name: Motion
                    custom_fields:
                      icon_motion: >
                        [[[ const state = entity.state === 'on' ? 'animate' : null;
                        return `<svg viewBox="0 0 50 50"><style>@keyframes animate{10%, 20%, 100%{transform: rotateZ(0deg);}30%, 50%, 70%{transform: rotateZ(7deg);}90%{transform: rotateZ(3deg);}40%, 60%, 80%{transform: rotateZ(-7deg);}}.animate{animation: animate 1.35s cubic-bezier(0.5, 1, 0.89, 1); animation-fill-mode: both; transform-origin: 70% 80%; animation-delay: 0s;}</style>
                        <path class="${state}" d="M32.1 18.4s.3-1.6.7-2.1c.3-.6.9-1.4 1.6-1.8.6-.4 1.1-.7 1.4-.7s.7-.1 1 .1.6.4.8 1.3l.3 2.7.1 2.4.2 4.1c0 .3.2 3.1.2 3.3s.2 2.7.2 3.2l-.1 2.5c.1 1.6.5 3.1-.2 4.6-.6 1.4-1.7 2.7-2.9 3.6-.5.4-1.9 1.3-2.9 1.7-1.1.5-2.2.8-3.3 1.1-.5.1-1.4.4-2.3.3s-1.8-.6-2.1-1l-1.6-2.3c-.6-.8-2.1-2.3-2.3-2.5l-2.7-2.8c-.2-.2-2.7-3.5-2.9-3.8l-3.1-4.7-1.8-3.2-1.5-2.8-.9-1.8c-.1-.2-.3-1.1-.2-1.4.3-1.2 1.4-1.4 2.3-.7.3.2.9 1 1.1 1.3s6.1 8.1 6.1 8.1c.2.3.7.3.9 0s-.1-.7-.2-.9c-.4-.6-8.3-11.5-8.3-11.5s-.6-.9-.7-1.1c-.3-1.1 0-2.3 1.1-2.7s1.9.3 2.6 1.1c.3.3 8.3 11.5 8.3 11.5.2.2.3.3.5.3.3 0 .5-.4.4-.7-.1-.2-.5-.9-.5-.9L11.8 9c-.6-1-.9-2-.1-3 .7-.8 2.2-1.3 3-.2.3.3 10.1 14.3 10.1 14.3.2.2.5.4.7.3.5-.1.3-.7.1-1-.1-.2-8.4-11.8-8.4-11.8-.4-.9-.6-2 .2-2.8 1-1.1 2.5-.5 3.3.5.2.3 1 1.4 1 1.4l2.7 3.7c.1.2 3.4 4.4 3.8 4.8.9 1.1 1.8 2.2 2.7 3.2l.5.5c.1.1.1.4.1.8 0 1.3.1 2.6.1 3.9 0 .2.1.4.2.6.3.3.6.1.7-.2.1-.2 0-2.4 0-2.7-.3-.3-.5-1.3-.4-2.9zM12.2 46.9s-2.8-.8-4.8-2.7-2.6-2.7-2.8-3-1.8-3-2-3.6c-.2-.5-.2-.7.2-1 .4-.4 1-.5 1.3.1.1.2.4 1 .5 1.2s1 1.9 1.7 2.8 1.6 2.2 4.4 3.8c.6.3 1.2.6 1.9.9.3.1.6.2.8.4.1.2.1.6-.1.8-.2.4-.7.4-1.1.3zM7.1 30.7l.9 3.1c.3.7 1.1 2.3 1.9 3.3s2.4 2.6 3.4 3.2 2 1.1 3 1.5c1 .3 1.1.4 1.2.5.3.4.2 1.2-.4 1.3-.2 0-1.2 0-1.8-.3L12 41.7c-.5-.4-3.9-3.1-5.1-6S5.3 31 5.2 30.4s-.2-1.1 0-1.4c.3-.4.9-.8 1.3-.3.2.3.3.6.3.9.1 0 .2.8.3 1.1zm26.8-25s.2-.1.5-.1.8.3 1.4.7 1.9 1 3.6 2.9 2.9 3.9 3.4 5.8c.5 1.8.8 3.1.9 5.5 0 .5.1 1.6 0 1.7-.2.5-.5.7-1 .7-.6 0-.7-.5-.7-1l-.1-2.9c-.1-.6-.3-1.9-.7-2.9-.3-1-.7-2.3-1.7-3.6-.9-1.3-2.1-2.8-3.2-3.5l-2.4-1.5c-.6-.6-.7-1.2 0-1.8zm4.9-2.5s.3-.2.5-.1c.2 0 .7.3.9.4s2.1 1.3 3.6 3c1.5 1.6 3.5 5.1 3.7 7.4.1.4.2.9 0 1-.2.2-.4.4-.7.4-.2 0-.5 0-.7-.1-.1-.2-.4-1.1-.4-1.3s-.6-2-1.1-3.1C44 9.7 43.5 8.5 42 7.1s-2.2-1.9-2.8-2.2-1.1-.6-1.1-1c.1-.3.3-.6.7-.7z"/></svg>`; ]]]
                    styles:
                      custom_fields:
                        icon_motion:
                          [top: 10%, left: 10.1%, width: 3.1vw, position: absolute,
                          fill: "[[[ return entity.state === 'on' ? '#516d82' : '#9da0a2'; ]]]"]
                    template: sensor

              - type: 'horizontal-stack'
                cards:
                  - type: 'custom:gap-card'

                  - type: 'custom:gap-card'

          - break

          #   C O L U M N 3   #

          - type: 'custom:gap-card'

          - break

          #   C O L U M N 4   # 

          - type: 'custom:gap-card'

          # ===================================================== #
          #                                                       #
          #                       L I G H T                       #
          #                                                       #
          # ===================================================== #

          - type: 'vertical-stack'
            cards:
              - type: 'horizontal-stack'
                cards:

                  # ==================================== #
                  #                                      #
                  #               DESK BULB              #
                  #                                      #
                  # ==================================== #

                  - type: 'custom:button-card'
                    entity: light.desk_bulb_light
                    name: Desk Bulb
                    custom_fields:
                      icon_hue: &icon_hue >
                        [[[ const state = entity.state === 'on' ? 'animate' : null;
                        return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"/>
                        <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"/></svg>`; ]]]
                    styles: &icon_hue_styles
                      custom_fields:
                        icon_hue:
                          [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                    template: light

                  - type: 'custom:gap-card'

              - type: 'horizontal-stack'
                cards:

                  # ==================================== #
                  #                                      #
                  #              DESK STRIP              #
                  #                                      #
                  # ==================================== #

                  - type: 'custom:button-card'
                    entity: light.xiaomi_desk_strip
                    name: Desk Strip
                    custom_fields:
                      icon_strip: &icon_strip >
                        [[[ const state = entity.state === 'on' ? 'animate' : null;
                        return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M2.45,40.21l-1.73,1.73c-0.56,0.56-0.56,1.46,0,2.02l5.33,5.33c0.56,0.56,1.46,0.56,2.02,0l1.73-1.73L2.45,40.21z M46.86,10.49l1.73-1.73c0.56-0.56,0.56-1.46,0-2.02l-5.33-5.33c-0.56-0.56-1.46-0.56-2.02,0l-1.73,1.73L46.86,10.49z M0,50 M50,0"/>
                        <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M36.31,34.99c-0.56-0.56-1.46-0.56-2.02,0c-0.56,0.56-0.56,1.46,0,2.02l3.04,3.04c0.28,0.28,0.64,0.42,1.01,0.42c1.26,0,1.91-1.53,1.01-2.44L36.31,34.99z M31.14,39.02c-0.27-0.74-1.09-1.12-1.83-0.85c-0.74,0.27-1.12,1.09-0.85,1.83l1.47,4.05c0.21,0.58,0.76,0.94,1.34,0.94c0.98,0,1.68-0.98,1.34-1.92L31.14,39.02z M43.34,30.63l-4.04-1.47c-0.74-0.27-1.56,0.11-1.83,0.85c-0.27,0.74,0.11,1.56,0.85,1.83l4.04,1.47c0.74,0.27,1.56-0.11,1.83-0.85C44.46,31.72,44.08,30.9,43.34,30.63z M12.99,15.71c0.56,0.56,1.46,0.56,2.02,0s0.56-1.46,0-2.02l-3.04-3.04c-0.56-0.56-1.46-0.56-2.02,0c-0.56,0.56-0.56,1.46,0,2.02L12.99,15.71z M18.16,11.68c0.27,0.74,1.09,1.12,1.83,0.85c0.74-0.27,1.12-1.09,0.85-1.83l-1.47-4.05c-0.27-0.74-1.09-1.12-1.83-0.85c-0.74,0.27-1.12,1.09-0.85,1.83L18.16,11.68z M5.96,20.07c4.36,1.59,4.19,1.56,4.53,1.56c0.58,0,1.13-0.36,1.34-0.94c0.27-0.74-0.11-1.56-0.85-1.83l-4.04-1.47c-0.74-0.27-1.56,0.11-1.83,0.85C4.84,18.98,5.22,19.8,5.96,20.07z M37.49,5.16c-1.64-0.98-3.8-0.76-5.22,0.65L5.11,32.98c-1.44,1.44-1.61,3.59-0.66,5.2l7.36,7.36c1.65,0.98,3.8,0.75,5.21-0.66l27.16-27.16c1.44-1.44,1.62-3.6,0.65-5.21C37.47,5.14,37.5,5.15,37.49,5.16L37.49,5.16z M0,0 M50,50"/></svg>`; ]]]
                    styles: &icon_strip_styles
                      custom_fields:
                        icon_strip:
                          [top: 9%, left: 9%, width: 3.05vw, position: absolute]
                    template: light

                  # ========================================== #
                  #                                            #
                  #              UNDER DESK STRIP              #
                  #                                            #
                  # ========================================== #

                  - type: 'custom:button-card'
                    entity: light.under_desk_strip_light
                    name: Desk Strip
                    custom_fields:
                      icon_strip: *icon_strip
                    styles: *icon_strip_styles
                    template: light

          - break

          #   C O L U M N 5   # 
          - type: 'custom:gap-card'

          - break

          #   C O L U M N 6   # 

          - type: 'custom:gap-card'

          # ===================================================== #
          #                                                       #
          #                        M O D E                        #
          #                                                       #
          # ===================================================== #

          - type: 'vertical-stack'
            cards:
              - type: 'horizontal-stack'
                cards:
                  
                  # ==================================== #
                  #                                      #
                  #               S T U D Y              #
                  #                                      #
                  # ==================================== #

                  - type: 'custom:button-card'
                    entity: input_boolean.study_mode
                    name: Study
                    custom_fields: 
                      icon_pencil: &study_mode >
                        [[[ const state = entity.state === 'on' ? 'wobble-hor-top' : null;
                        return '<svg viewBox="0 0 50 50"><style>@keyframes wobble-hor-top{0%,100%{transform:translateX(0);transform-origin:50% 50%}15%{transform:translateX(-30px) rotate(6deg)}30%{transform:translateX(15px) rotate(-6deg)}45%{transform:translateX(-15px) rotate(3.6deg)}60%{transform:translateX(9px) rotate(-2.4deg)}75%{transform:translateX(-6px) rotate(1.2deg)}}</style>
                        <path fill="#9da0a2" d="M0,0 M50,50 M40.98,15.24l-6-6c-1.1-1.1-1.1-2.89,0-4L38,2.23c1.65-1.65,4.34-1.65,5.98,0l4.01,4.01c0.8,0.8,1.24,1.86,1.24,2.99c0,1.13-0.44,2.19-1.24,2.99l-3.01,3.01C43.88,16.35,42.09,16.35,40.98,15.24z M37,19.23l-6-6c-1.1-1.1-1.1-2.89,0-4l3.98-3.98l10,10L41,19.23C39.89,20.33,38.1,20.33,37,19.23z M15.4,44.83l25.6-25.61l-10-10L5.4,34.84 l2.01,3.99c0.75,0.75,1.72,1.18,2.76,1.24c0.06,1.01,0.47,2,1.23,2.76L15.4,44.83z M12.41,41.82c-1.1-1.1-1.1-2.89,0-4c-1.1,1.1-2.89,1.1-4,0l-3-3L5.4,34.84c-0.16,0.16-0.27,0.34-0.34,0.55l-2.78,8.35c2.09,0.49,3.73,2.12,4.21,4.21l8.35-2.78c0.21-0.07,0.4-0.19,0.55-0.34l0.01-0.01L12.41,41.82z M2.28,43.74l-1.21,3.63c-0.17,0.51-0.04,1.07,0.34,1.44c0.27,0.27,0.63,0.41,1,0.41c0.15,0,0.3-0.02,0.45-0.07l3.63-1.21C6.01,45.86,4.37,44.23,2.28,43.74z"/>
                        <path class="${state}1" fill="#FEA832" d="M0,0 M50,50 M15.4,44.83l25.6-25.61l-10-10L5.4,34.84l2.01,3.99c0.75,0.75,1.72,1.18,2.76,1.24c0.06,1.01,0.47,2,1.23,2.76L15.4,44.83z"/>
                        <path class="${state}2" fill="#E1E4FB" d="M0,0 M50,50 M37,19.23l-6-6c-1.1-1.1-1.1-2.89,0-4l3.98-3.98l10,10L41,19.23C39.89,20.33,38.1,20.33,37,19.23z M12.41,41.82c-1.1-1.1-1.1-2.89,0-4c-1.1,1.1-2.89,1.1-4,0l-3-3L5.4,34.84c-0.16,0.16-0.27,0.34-0.34,0.55l-2.78,8.35c2.09,0.49,3.73,2.12,4.21,4.21l8.35-2.78c0.21-0.07,0.4-0.19,0.55-0.34l0.01-0.01L12.41,41.82z"/>
                        <path class="${state}3" fill="#063E8B" d="M0,0 M50,50 M2.28,43.74l-1.21,3.63c-0.17,0.51-0.04,1.07,0.34,1.44c0.27,0.27,0.63,0.41,1,0.41c0.15,0,0.3-0.02,0.45-0.07l3.63-1.21C6.01,45.86,4.37,44.23,2.28,43.74z"/>
                        <path class="${state}4" fill="#FD003A" d="M0,0 M50,50 M40.98,15.24l-6-6c-1.1-1.1-1.1-2.89,0-4L38,2.23c1.65-1.65,4.34-1.65,5.98,0l4.01,4.01c0.8,0.8,1.24,1.86,1.24,2.99c0,1.13-0.44,2.19-1.24,2.99l-3.01,3.01C43.88,16.35,42.09,16.35,40.98,15.24z"/></svg>'; ]]]
                    styles: &mode_styles
                      custom_fields:
                        icon_pencil:
                          [top: 9%, left: 9%, width: 3.05vw, position: absolute]
                    template: mode

                  # ==================================== #
                  #                                      #
                  #                G A M E               #
                  #                                      #
                  # ==================================== #

                  - type: 'custom:button-card'
                    entity: input_boolean.game_mode
                    name: Game
                    template: mode

              - type: 'horizontal-stack'
                cards:

                  # ==================================== #
                  #                                      #
                  #               S L E E P              #
                  #                                      #
                  # ==================================== #

                  - type: 'custom:button-card'
                    entity: input_boolean.sleep_mode
                    name: Sleep
                    template: mode

                  # ==================================== #
                  #                                      #
                  #                A W A Y               #
                  #                                      #
                  # ==================================== #

                  - type: 'custom:button-card'
                    entity: input_boolean.away_mode
                    name: Away
                    template: mode

          - break

          #   C O L U M N 7   # 
          - type: 'custom:gap-card'